(this["webpackJsonpreact-auth-template"]=this["webpackJsonpreact-auth-template"]||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(23),r=a.n(s),c=(a(69),a(49)),i=a(6),o=a(7),l=a(99),u=a(52),d=(a(70),a(1)),j=function(e){var t=e.variant,a=e.heading,s=e.message,r=e.deleteAlert,c=e.id,o=Object(n.useState)(!0),l=Object(i.a)(o,2),j=l[0],b=l[1],m=Object(n.useState)(null),h=Object(i.a)(m,2),O=h[0],p=h[1];Object(n.useEffect)((function(){var e=setTimeout(g,5e3);return p(e),function(){clearTimeout(O)}}),[]);var g=function(){return b(!1)};return j||setTimeout((function(){r(c)}),300),Object(d.jsx)(u.a,{dismissible:!0,show:j,variant:t,onClose:g,children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(u.a.Heading,{children:a}),Object(d.jsx)("p",{className:"alert-body",children:s})]})})},b=a(64),m=a(40),h=a(63),O=a(13),p=Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(O.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(d.jsx)(O.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]}),g=Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(O.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(d.jsx)(O.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),x=Object(d.jsx)(n.Fragment,{children:Object(d.jsx)(O.c,{to:"/",className:"nav-link",children:"Home"})}),v=function(e){var t=e.user;return Object(d.jsx)(m.a,{bg:"primary",variant:"dark",expand:"md",children:Object(d.jsxs)(h.a,{children:[Object(d.jsx)(m.a.Brand,{children:Object(d.jsx)(O.b,{to:"/",style:{color:"#FFF",textDecoration:"none"},children:"react-auth-template"})}),Object(d.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsx)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(b.a,{className:"ms-auto",children:[t&&Object(d.jsxs)("span",{className:"navbar-text me-2",children:["Welcome, ",t.email]}),x,t?p:g]})})]})})},f=a(20),w=a.n(f),S=a(27),y="https://aqueous-atoll-85096.herokuapp.com",C="http://localhost:4741",k="localhost"===window.location.hostname?C:y,N=a(39),P=a.n(N),A=function(e,t,a){return P()({method:"POST",url:k+"/sign-up/",data:{credentials:{email:e,password:t,password_confirmation:a}}})},F=function(e,t){return P()({url:k+"/sign-in/",method:"POST",data:{credentials:{email:e,password:t}}})},I=function(e){return P()({url:k+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})},E=function(e,t,a){return P()({url:k+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(a.token)},data:{passwords:{old:e,new:t}}})},U=a(9),q=a(32),L=function(e){var t=e.msgAlert,a=e.setUser,s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],l=r[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)(""),O=Object(i.a)(h,2),p=O[0],g=O[1],x=Object(n.useState)(!1),v=Object(i.a)(x,2),f=v[0],y=v[1],C=function(){var e=Object(S.a)(w.a.mark((function e(n){var s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,A(c,b,p);case 4:return e.next=6,F(c,b);case 6:s=e.sent,a(s.data.user),t({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"}),y(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),l(""),m(""),g(""),t({heading:"Sign Up Failed with error: "+e.t0.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return f?Object(d.jsx)(o.a,{to:"/"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Sign Up"}),Object(d.jsxs)(U.a,{onSubmit:C,children:[Object(d.jsxs)(U.a.Group,{controlId:"email",children:[Object(d.jsx)(U.a.Label,{children:"Email address"}),Object(d.jsx)(U.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(d.jsxs)(U.a.Group,{controlId:"password",children:[Object(d.jsx)(U.a.Label,{children:"Password"}),Object(d.jsx)(U.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return m(e.target.value)}})]}),Object(d.jsxs)(U.a.Group,{controlId:"passwordConfirmation",children:[Object(d.jsx)(U.a.Label,{children:"Password Confirmation"}),Object(d.jsx)(U.a.Control,{required:!0,name:"passwordConfirmation",value:p,type:"password",placeholder:"Confirm Password",onChange:function(e){return g(e.target.value)}})]}),Object(d.jsx)(q.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},T=function(e){var t=e.msgAlert,a=e.setUser,s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],l=r[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),p=O[0],g=O[1],x=function(){var e=Object(S.a)(w.a.mark((function e(n){var s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,F(c,b);case 4:s=e.sent,a(s.data.user),t({heading:"Sign In Success",message:"Welcome!",variant:"success"}),g(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),l(""),m(""),t({heading:"Sign In Failed with error: "+e.t0.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(d.jsx)(o.a,{to:"/"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Sign In"}),Object(d.jsxs)(U.a,{onSubmit:x,children:[Object(d.jsxs)(U.a.Group,{controlId:"email",children:[Object(d.jsx)(U.a.Label,{children:"Email address"}),Object(d.jsx)(U.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(d.jsxs)(U.a.Group,{controlId:"password",children:[Object(d.jsx)(U.a.Label,{children:"Password"}),Object(d.jsx)(U.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return m(e.target.value)}})]}),Object(d.jsx)(q.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},G=function(e){var t=e.msgAlert,a=e.clearUser,s=e.user,r=Object(n.useState)(!1),c=Object(i.a)(r,2),l=c[0],u=c[1];return Object(n.useEffect)(Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(s);case 2:t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"}),u(!0),a();case 5:case"end":return e.stop()}}),e)}))),[]),!s||l?Object(d.jsx)(o.a,{to:"/"}):""},D=function(e){var t=e.msgAlert,a=e.user,s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],l=r[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],m=j[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),p=O[0],g=O[1],x=function(){var e=Object(S.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,E(c,b,a);case 4:t({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"}),g(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),l(""),m(""),t({heading:"Change Password Failed with error: "+e.t0.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return!a||p?Object(d.jsx)(o.a,{to:"/"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Change Password"}),Object(d.jsxs)(U.a,{onSubmit:x,children:[Object(d.jsxs)(U.a.Group,{controlId:"oldPassword",children:[Object(d.jsx)(U.a.Label,{children:"Old password"}),Object(d.jsx)(U.a.Control,{required:!0,name:"oldPassword",value:c,type:"password",placeholder:"Old Password",onChange:function(e){return l(e.target.value)}})]}),Object(d.jsxs)(U.a.Group,{controlId:"newPassword",children:[Object(d.jsx)(U.a.Label,{children:"New Password"}),Object(d.jsx)(U.a.Control,{required:!0,name:"newPassword",value:b,type:"password",placeholder:"New Password",onChange:function(e){return m(e.target.value)}})]}),Object(d.jsx)(q.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},B=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)([]),u=Object(i.a)(r,2),b=u[0],m=u[1],h=function(e){var t=e.heading,a=e.message,n=e.variant,s=Object(l.a)();m((function(e){return[].concat(Object(c.a)(e),[{heading:t,message:a,variant:n,id:s}])}))},O=function(e){m((function(t){return t.filter((function(t){return t.id!==e}))}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v,{user:a}),b.map((function(e){return Object(d.jsx)(j,{heading:e.heading,variant:e.variant,message:e.message,id:e.id,deleteAlert:O},e.id)})),Object(d.jsx)("main",{className:"container",children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"/sign-up",element:Object(d.jsx)(L,{msgAlert:h,setUser:s})}),Object(d.jsx)(o.b,{path:"/sign-in",element:Object(d.jsx)(T,{msgAlert:h,setUser:s})}),Object(d.jsx)(o.b,{path:"/sign-out",element:Object(d.jsx)(G,{msgAlert:h,clearUser:function(){return s(null)},user:a})}),Object(d.jsx)(o.b,{path:"/change-password",element:Object(d.jsx)(D,{msgAlert:h,user:a})})]})})]})},H=Object(d.jsx)(O.a,{basename:"/auth-template-deploy-test",children:Object(d.jsx)(B,{})});r.a.render(H,document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.cc71201a.chunk.js.map